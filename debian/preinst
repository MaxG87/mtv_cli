#!/bin/bash
# vim:ft=sh:ai:et:si:sts=4:sw=4
#
# preinst script for mtvclient
#
set -e
#. /usr/share/debconf/confmodule

case "$1" in
    install|upgrade)
# create python virtualenv
        if ! [[ -f "/usr/lib/mtvclient/bin/activate" ]]; then
            virtualenv --python=/usr/bin/python3 /usr/lib/mtvclient
        fi

# add/upgrade pick and bottle to virtualenv
        . /usr/lib/mtvclient/bin/activate
        for p in pip pick bottle
        do
            pip3 install "${p}" --upgrade
        done
        deactivate
    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
